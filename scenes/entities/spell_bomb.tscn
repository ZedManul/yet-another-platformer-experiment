[gd_scene load_steps=11 format=3 uid="uid://bw0vjjgcbwh6b"]

[ext_resource type="Script" uid="uid://bied1vai4wify" path="res://scripts/entities/spell_bomb.gd" id="1_g8bma"]
[ext_resource type="Script" uid="uid://7molth4koagu" path="res://addons/trail_2d/trail_2d.gd" id="2_0bxpt"]
[ext_resource type="PackedScene" uid="uid://cex5xaffjwogv" path="res://scenes/entities/spell_bomb_explosion.tscn" id="2_dvbq4"]
[ext_resource type="Script" uid="uid://dsc72ow8ic3gu" path="res://scripts/_debug/beam_line_display.gd" id="3_6t0un"]
[ext_resource type="PackedScene" uid="uid://cbesjjuma00yp" path="res://scenes/entities/spell_pickup.tscn" id="3_7436n"]
[ext_resource type="Script" uid="uid://pp8lm1clk2ca" path="res://scripts/components/hitbox.gd" id="4_hyexc"]
[ext_resource type="Script" uid="uid://d3ktllfkhh6o0" path="res://scripts/components/hitbox_beamifier.gd" id="6_7436n"]

[sub_resource type="Curve" id="Curve_0bxpt"]
_data = [Vector2(0, 1), 0.0, 0.0, 0, 0, Vector2(1, 0), 0.0, 0.0, 0, 0]
point_count = 2

[sub_resource type="CircleShape2D" id="CircleShape2D_tujdu"]
radius = 6.0

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_qtirk"]
radius = 3.0

[node name="SpellBomb" type="Area2D" node_paths=PackedStringArray("beam_visual", "beam_raycast", "beam_hitbox")]
collision_layer = 0
collision_mask = 7
script = ExtResource("1_g8bma")
beam_visual = NodePath("RayCast2D/Line2D")
beam_raycast = NodePath("RayCast2D")
beam_hitbox = NodePath("RayCast2D/RayBox")
spell_explosion_scene = ExtResource("2_dvbq4")
spell_pickup_scene = ExtResource("3_7436n")

[node name="Trail2D" type="Line2D" parent="."]
width = 4.0
width_curve = SubResource("Curve_0bxpt")
default_color = Color(0.68235296, 0, 1, 1)
joint_mode = 2
begin_cap_mode = 2
end_cap_mode = 2
script = ExtResource("2_0bxpt")
metadata/_custom_type_script = "uid://7molth4koagu"

[node name="Polygon2D4" type="Polygon2D" parent="."]
rotation = -1.5707964
polygon = PackedVector2Array(6, 1.0000002, 6, -0.99999976, 1.0000002, -6, -0.99999976, -6, -6, -1.0000002, -6, 0.99999976, -1.0000002, 6, 0.99999976, 6)

[node name="Polygon2D" type="Polygon2D" parent="Polygon2D4"]
rotation = 1.5707964
color = Color(0.6833334, 0, 1, 1)
polygon = PackedVector2Array(3, 0, 0, -3, -3, 0, 0, 3)

[node name="CollisionShape2D" type="CollisionShape2D" parent="."]
shape = SubResource("CircleShape2D_tujdu")

[node name="RayCast2D" type="RayCast2D" parent="."]
target_position = Vector2(1024, 0)
hit_from_inside = true
collide_with_areas = true

[node name="RayBox" type="Area2D" parent="RayCast2D"]
collision_layer = 4
collision_mask = 0
script = ExtResource("4_hyexc")
damage = 2.0
knockback_velocity_multiplier = 1.0
fixed_knockback = true
knockback = Vector2(400, 0)
ignored_teams = Array[int]([0])
metadata/_custom_type_script = "uid://pp8lm1clk2ca"

[node name="HitboxBeamShape" type="CollisionShape2D" parent="RayCast2D/RayBox" node_paths=PackedStringArray("raycast")]
rotation = -1.5707964
shape = SubResource("CapsuleShape2D_qtirk")
script = ExtResource("6_7436n")
raycast = NodePath("../..")
metadata/_custom_type_script = "uid://d3ktllfkhh6o0"

[node name="Line2D" type="Line2D" parent="RayCast2D" node_paths=PackedStringArray("raycast")]
visible = false
points = PackedVector2Array(0, 0, 18, 0)
width = 6.0
begin_cap_mode = 2
end_cap_mode = 2
script = ExtResource("3_6t0un")
raycast = NodePath("..")
