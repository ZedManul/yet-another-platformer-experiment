[gd_scene load_steps=5 format=3 uid="uid://drbdhl6tk3tmy"]

[ext_resource type="Script" uid="uid://dsc72ow8ic3gu" path="res://scripts/_debug/beam_line_display.gd" id="1_fo882"]
[ext_resource type="Script" uid="uid://pp8lm1clk2ca" path="res://scripts/components/hitbox.gd" id="2_r0lmn"]
[ext_resource type="Script" uid="uid://d3ktllfkhh6o0" path="res://scripts/components/hitbox_beamifier.gd" id="3_st30h"]

[sub_resource type="CapsuleShape2D" id="CapsuleShape2D_xfi64"]
radius = 3.0

[node name="GunFireBeam" type="RayCast2D"]
target_position = Vector2(1024, 0)

[node name="ShotVisual" type="Line2D" parent="." node_paths=PackedStringArray("raycast")]
width = 6.0
begin_cap_mode = 2
end_cap_mode = 2
script = ExtResource("1_fo882")
raycast = NodePath("..")

[node name="GunShotHitBox" type="Area2D" parent="."]
position = Vector2(27, 0)
collision_layer = 4
collision_mask = 0
script = ExtResource("2_r0lmn")
enabled = true
fixed_knockback = true
knockback = Vector2(300, 0)
ignored_teams = Array[int]([0])
metadata/_custom_type_script = "uid://pp8lm1clk2ca"

[node name="HitboxBeamShape" type="CollisionShape2D" parent="GunShotHitBox" node_paths=PackedStringArray("raycast")]
rotation = 1.5707941
shape = SubResource("CapsuleShape2D_xfi64")
script = ExtResource("3_st30h")
raycast = NodePath("../..")
metadata/_custom_type_script = "uid://d3ktllfkhh6o0"

[node name="ExpiryTimer" type="Timer" parent="."]
process_callback = 0
wait_time = 0.2
one_shot = true
autostart = true

[connection signal="timeout" from="ExpiryTimer" to="." method="queue_free"]
